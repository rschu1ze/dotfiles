<?xml version="1.0"?>
<clickhouse>

    <listen_host>localhost</listen_host>

    <path>/var/lib/clickhouse1/</path>

    <tcp_port>9000</tcp_port>

    <users_config>clickhouse-users1.xml</users_config>

    <logger>
        <level>trace</level>
        <console>true</console>

        <!-- stuff for library bridge -->
        <library_bridge_log>/home/ubuntu/clickhouse-library-bridge.log</library_bridge_log>
        <library_bridge_errlog>/home/ubuntu/clickhouse-library-bridge.err.log</library_bridge_errlog>
        <library_bridge_level>trace</library_bridge_level>
    </logger>

    <!-- stuff for library bridge -->
    <dictionaries_lib_path>/home/ubuntu/repo/ClickHouse1/tmp/</dictionaries_lib_path>

    <!-- stuff for old catboost integration -->
    <catboost_dynamic_library_path>/home/ubuntu/catboost/data/libcatboostmodel.so</catboost_dynamic_library_path>
    <models_config>/home/ubuntu/catboost/models/*_model.xml</models_config>

    <!-- stuff for new catboost bridge -->
    <catboost_lib_path>/home/ubuntu/catboost/data/libcatboostmodel.so</catboost_lib_path>

    <!-- enable SQL-based RBAC -->
    <access_control_path>/home/ubuntu/rbac/</access_control_path>

    <zookeeper>
        <node>
            <host>localhost</host>
            <port>9181</port>
        </node>
        <node>
            <host>localhost</host>
            <port>19181</port>
        </node>
        <node>
            <host>localhost</host>
            <port>29181</port>
        </node>
    </zookeeper>

    <keeper_server>
        <tcp_port>9181</tcp_port>
        <server_id>1</server_id>

        <log_storage_path>/var/lib/clickhouse1/coordination/log</log_storage_path>
        <snapshot_storage_path>/var/lib/clickhouse1/coordination/snapshots</snapshot_storage_path>

        <raft_configuration>
            <server>
                <id>1</id>
                <hostname>localhost</hostname>
                <port>9444</port>
            </server>
            <server>
                <id>2</id>
                <hostname>localhost</hostname>
                <port>9445</port>
            </server>
            <server>
                <id>3</id>
                <hostname>localhost</hostname>
                <port>9446</port>
            </server>
        </raft_configuration>
    </keeper_server>

    <remote_servers>
        <test_cluster_database_replicated>
            <shard>
                <replica>
                    <host>localhost</host>
                    <port>9000</port>
                </replica>
            </shard>
            <shard>
                <replica>
                    <host>localhost</host>
                    <port>19000</port>
                </replica>
            </shard>
            <shard>
                <replica>
                    <host>localhost</host>
                    <port>29000</port>
                </replica>
            </shard>
        </test_cluster_database_replicated>
    </remote_servers>

    <distributed_ddl>
        <path>/clickhouse/task_queue/ddl</path>
        <cleanup_delay_period>60</cleanup_delay_period>
        <task_max_lifetime>86400</task_max_lifetime>
        <max_tasks_in_queue>1000</max_tasks_in_queue>
    </distributed_ddl>

</clickhouse>
